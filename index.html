<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Video</title>
  <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
</head>


<!-- 
MAIN
https://youtu.be/9fPl7yYqBts

A
Project Atum
https://youtu.be/yOCxZRbwipE

B
Project Thoth
https://youtu.be/g2qxPuPoV5c

AA
智慧醫療<br>Smart Healthcare
https://youtu.be/tnPscr4MZb4

AB
智慧運輸<br>Smart Mobility
https://youtu.be/zQa9lrEor1g

BA
智慧育樂<br>Future Entertainment<br>Technology
https://youtu.be/FghZx1o4ePE

BB
智慧檢測<br>Smart Monitoring<br>Technology
https://youtu.be/FcqhOOE3X8A
 -->
<style>
	.box{
    position: relative;
		display: flex;
		flex-direction: column;
		justify-content: center;
		align-items: center;		
	}

  body{
    font-family: Verdana, Geneva, sans-serif;
  }


  .btn-group {
      display: flex;
      justify-content: center;
      align-items: center;		    
      z-index: 99;
      position:absolute; 
      top:0;
      top:60%;
      width:100%;
    }

    .btn-group-one {
      display: flex;
      justify-content: center;
      align-items: center;		    
      z-index: 99;
      position:absolute; 
      top:0;
      top:70%;
      width:100%;
    } 

  @media (max-width: 768px) {
    button {
      border: 1px;
      border-style: solid;
    }
  }

  /* @media screen and (orientation: landscape) {
    .btn-group, .btn-group-one {
      display: flex;
      justify-content: center;
      align-items: center;		    
      z-index: 99;
      position:absolute; 
      top:0;
      top:80%;
      width:100%;
    }
  }

  @media screen and (orientation: portrait) {
    button {
      border: 1px;
      border-style: solid;
    }

    .btn-group {
          display: flex;
          justify-content: space-around;
          align-items: center;		      
          position:absolute;
          z-index: 99;
          top:0;
          top:50%;
          width:100%;   
    }    

    .btn-group-one {
          display: flex;
          justify-content: space-around;
          align-items: center;		      
          position:absolute;
          z-index: 99;
          top:0;
          top:50%;
          width:100%;   
    }
  } */

</style>

<body>



  <div class="box bg-yello-500">
   
    <div  class="relative">
      <div class="video-wrapper">
        <div id="MAIN"></div> 
      </div>
           
      <div class="btn-group-one">
        <button OnClick="clickA()" 
        class="mr-2 hover:bg-red-400 bg-opacity-75  md:border-2 border-white rounded-xl  
        px-4 py-2 md:px-10 md:py-4 bg-gray-400 z-10 text-white md:font-bold text-sm md:text-xl transparent" id="btnA" style="display:none;">Project Atum</button>
        <button OnClick="clickB()" 
        class=" hover:bg-red-400 bg-opacity-75  md:border-2 border-white rounded-xl  
        px-4 py-2 md:px-10 md:py-4 bg-gray-400 z-10 text-white md:font-bold text-sm md:text-xl transparent" id="btnB" style="display:none;">Project Thoth</button>
      </div>

    </div>


    <div class="relative">
      <div id="containerA" style="display:none;"></div>
      <div id="containerB" style="display:none;"></div>
      <div class="btn-group flex items-center justify-center">
        <button OnClick="clickAA()" class="mr-2 hover:bg-red-400 bg-opacity-75  md:border-2 border-white rounded-xl  px-2 py-2 md:px-8 md:py-4 bg-gray-400 z-10 text-white md:font-bold text-sm md:text-xl transparent" id="btnAA" style="display:none;">智慧醫療<br>Smart Healthcare</button>
        <button OnClick="clickAB()" class="hover:bg-red-400 bg-opacity-75  md:border-2 border-white rounded-xl  px-4 py-2 md:px-10 md:py-4 bg-gray-400 z-10 text-white md:font-bold text-sm md:text-xl transparent" id="btnAB" style="display:none;">智慧運輸<br>Smart Mobility</button>
      </div>
      <div class="btn-group flex items-center justify-center">
        <button OnClick="clickBA()" class="mr-2 hover:bg-red-400 bg-opacity-75  md:border-2 border-white rounded-xl px-1 py-2 md:px-7 md:py-4 bg-gray-400 z-10 text-white font-light md:font-bold text-sm md:text-xl transparent" id="btnBA" style="display:none;">智慧育樂<br>Future Entertainment</button>
        <button OnClick="clickBB()" class="hover:bg-red-400 bg-opacity-75  md:border-2 border-white rounded-xl px-4 py-2 md:px-10 md:py-4 bg-gray-400 z-10 text-white font-light md:font-bold text-sm md:text-xl transparent" id="btnBB" style="display:none;">智慧檢測<br>Smart Monitoring</button>
      </div>
    </div>


    <div class="relative">
      <div id="containerAA" style="display:none;"></div>
      <div id="containerAB" style="display:none;"></div>

    </div>

    <div class="relative">
      <div id="containerBA" style="display:none;"></div>
      <div id="containerBB" style="display:none;"></div>

    </div>
  </div>

    <script>

		const containerA = document.getElementById('containerA');
		const containerB = document.getElementById('containerB');
		const containerAA = document.getElementById('containerAA');
		const containerAB = document.getElementById('containerAB');
		const containerBA = document.getElementById('containerBA');
		const containerBB = document.getElementById('containerBB');
		
  	const btnA = document.getElementById('btnA');
		const btnB = document.getElementById('btnB');
  	const btnAA = document.getElementById('btnAA');
		const btnAB = document.getElementById('btnAB');		
		const btnBA = document.getElementById('btnBA');
		const btnBB = document.getElementById('btnBB');

    var main_video;
    var a_video;
    var b_video;
    var aa_video;
    var ab_video;
    var ba_video;
    var bb_video;


    var clickedA = false;
    var clickedB = false;
    var clickedAA = false;
    var clickedAB = false;
    var clickedBA = false;
    var clickedBB = false;



      var done = false;

      var tag = document.createElement('script');
      tag.src = "https://www.youtube.com/iframe_api";
      var firstScriptTag = document.getElementsByTagName('script')[0];
      firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

      function onYouTubeIframeAPIReady() {
        var controlsValue = 1; // 0 = no controls
        // var landscape = $(window).height() <= $(window).width();
        // var portrait = $(window).height() > $(window).width();

        var main_video_data = renderVideo( "9fPl7yYqBts", onPlayerStateChange_m );
        var a_video_data = renderVideo( "yOCxZRbwipE", onPlayerStateChange_a );
        var b_video_data = renderVideo( "g2qxPuPoV5c", onPlayerStateChange_b );
        var aa_video_data = renderVideo( "tnPscr4MZb4", onPlayerStateChange_other );
        var ab_video_data = renderVideo( "zQa9lrEor1g", onPlayerStateChange_other );
        var ba_video_data = renderVideo( "FghZx1o4ePE", onPlayerStateChange_other );
        var bb_video_data = renderVideo( "FcqhOOE3X8A", onPlayerStateChange_other );

        function renderVideo( video_id, onStateChange ){
          let video_data = {
              height: $(window).width()*(9/16),
              width: $(window).width(),
              videoId: video_id,
              events: {
                'onReady': onPlayerReady,
                'onStateChange': onStateChange,
              },
              playerVars: {
                'playsinline': 1,
                'controls': controlsValue,
              },
            }
          return video_data;
        }

        main_video = new YT.Player('MAIN', main_video_data);
        a_video = new YT.Player('containerA', a_video_data);
        b_video = new YT.Player('containerB', b_video_data);
        aa_video = new YT.Player('containerAA', aa_video_data);
        ab_video = new YT.Player('containerAB', ab_video_data);
        ba_video = new YT.Player('containerBA', ba_video_data);
        bb_video = new YT.Player('containerBB', bb_video_data);

        // a_video = new YT.Player('containerA', {
        //   height: $(window).height(),
        //   width: $(window).width(),
        //   videoId: "yOCxZRbwipE",
        //   events: {
        //     'onReady': onPlayerReady,
        //     'onStateChange': onPlayerStateChange_a
        //   },
        //   playerVars: {
        //      'playsinline': 1,
        //      'controls': controlsValue,
        //   }
        // });

        // b_video = new YT.Player('containerB', {
        //   height: $(window).height(),
        //   width: $(window).width(),
        //   videoId: "g2qxPuPoV5c",
        //   events: {
        //     'onReady': onPlayerReady,
        //     'onStateChange': onPlayerStateChange_b,
        //   },
        //   playerVars: {
        //      'playsinline': 1,
        //       'controls': controlsValue,
        //   }
        // });

        // aa_video = new YT.Player('containerAA', {
        //   height: $(window).height(),
        //   width: $(window).width(),
        //   videoId: "tnPscr4MZb4",
        //   events: {
        //     'onReady': onPlayerReady,
        //     'onStateChange': onPlayerStateChange_other
        //   },
        //   playerVars: {
        //      'playsinline': 1,
        //      'controls': controlsValue,
        //   }
        // });

        // ab_video = new YT.Player('containerAB', {
        //   height: $(window).height(),
        //   width: $(window).width(),
        //   videoId: "zQa9lrEor1g",
        //   events: {
        //     'onReady': onPlayerReady,
        //     'onStateChange': onPlayerStateChange_other
        //   },
        //   playerVars: {
        //      'playsinline': 1,
        //      'controls': controlsValue,
        //   }
        // });

        // ba_video = new YT.Player('containerBA', {
        //   height: $(window).height(),
        //   width: $(window).width(),
        //   videoId: "FghZx1o4ePE",
        //   events: {
        //     'onReady': onPlayerReady,
        //     'onStateChange': onPlayerStateChange_other
        //   },
        //   playerVars: {
        //      'playsinline': 1,
        //      'controls': controlsValue,
        //   }
        // });

        // bb_video = new YT.Player('containerBB', {
        //   height: $(window).height(),
        //   width: $(window).width(),
        //   videoId: "FcqhOOE3X8A",
        //   events: {
        //     'onReady': onPlayerReady,
        //     'onStateChange': onPlayerStateChange_other
        //   },
        //   playerVars: {
        //      'playsinline': 1,
        //      'controls': controlsValue,
        //   }
        // });
  
      }


      function onPlayerReady(event) {
        // event.target.playVideo();
      }

      function startInterval( player, btn1, bnt2 ) {
        checkInt = setInterval(function() {
          console.log("startInterval")
          console.log(player.getCurrentTime())
            if (player.getCurrentTime() >= player.getDuration()-12 && player.getCurrentTime() < player.getDuration()-1 && !clickedA && !clickedB) {
              showBtn( btn1, bnt2 );
              clearInterval(checkInt);
            };
        }, 1000)
      }

      function startInterval2( player, btn1, bnt2 ) {
        checkInt = setInterval(function() {
          console.log("startInterval2")
          console.log(player.getCurrentTime())
            if (player.getCurrentTime() >= player.getDuration()-6 && player.getCurrentTime() < player.getDuration()-1 && !clickedAA && !clickedAB ) {
              showBtn( btn1, bnt2 );
              clearInterval(checkInt);
            };
        }, 1000)
      }

      function startInterval3( player, btn1, bnt2 ) {
        checkInt = setInterval(function() {
          console.log("startInterval3")
          console.log(player.getCurrentTime())
            if (player.getCurrentTime() >= player.getDuration()-7 && player.getCurrentTime() < player.getDuration()-1 && !clickedBA && !clickedBB) {
              showBtn( btn1, bnt2 );
              clearInterval(checkInt);
            };
        }, 1000)
      }      

      function resize( e ){
        $( window ).resize(function() {
           e.target.setSize( $(window).width() , $(window).width()*(9/16) );
        });
      }


// onPlayerStateChange ============================================
      function onPlayerStateChange_m(event) {
        if (event.data == YT.PlayerState.PLAYING ) {
          startInterval( event.target, btnA, btnB );
          resize( event );
        }

        if (event.data == YT.PlayerState.ENDED) {
          hideBtn( btnA, btnB );
          hideContainer( window.MAIN );
          showContainer( window.containerA );
          a_video.playVideo();
        }
      }

      function onPlayerStateChange_a(event) {
        if (event.data == YT.PlayerState.PLAYING ) {
          startInterval2( event.target, btnAA, btnAB  );
          resize( event );
        }

        if (event.data == YT.PlayerState.ENDED) {
          hideBtn( btnAA, btnAB );
          hideContainer( window.containerA );
          showContainer( window.containerAA );
          aa_video.playVideo();
          
        }
      }

      function onPlayerStateChange_b(event) {
        if (event.data == YT.PlayerState.PLAYING ) {
          startInterval3( event.target, btnBA, btnBB );
          resize( event );
        }

        if (event.data == YT.PlayerState.ENDED) {
          hideBtn( btnBA, btnBB );
          hideContainer( window.containerB );
          showContainer( window.containerBA );
          ba_video.playVideo();
   
        }
      }

      function onPlayerStateChange_other () {
        if (event.data == YT.PlayerState.PLAYING ) {
          resize( event );
        }
      }

// function============================================
      function showBtn(btn1, btn2) {
				btn1.style.display = "block";
				btn2.style.display = "block";
        // done = true;
      }
      function hideBtn(btn1, btn2) {
        btn1.style.display = "none";
        btn2.style.display = "none";
        // done = false;
      }
      function showContainer(container) {
        container.style.display = "block"
      }
      function hideContainer(container) {
        container.style.display = "none";
      }




// click============================================
      function clickA(){
          hideBtn( btnA, btnB );
          main_video.destroy();
          main_video.setInterval   
          hideContainer( window.MAIN );
          showContainer( window.containerA );
          a_video.playVideo();
          clickedA = true;
          clickedB = true;
      }
      function clickB(){
          hideBtn( btnA, btnB );
          main_video.destroy();  
          hideContainer( window.MAIN );
          showContainer( window.containerB );
          b_video.playVideo();
          clickedA = true;
          clickedB = true;
      }
      function clickAA(){
          hideBtn( btnAA, btnAB );
          a_video.destroy();  
          hideContainer( window.containerA );
          showContainer( window.containerAA );
          aa_video.playVideo();
          clickedAA = true;
          clickedAB = true;
      }
      function clickAB(){
          hideBtn( btnAA, btnAB );
          a_video.destroy();  
          hideContainer( window.containerA );
          showContainer( window.containerAB );
          ab_video.playVideo();
          clickedAA = true;
          clickedAB = true;
      }
      function clickBA(){
          hideBtn( btnBA, btnBB );
          b_video.destroy();    
          hideContainer( window.containerB );
          showContainer( window.containerBA );
          ba_video.playVideo();
          clickedBA = true;
          clickedBB = true;
      }
      function clickBB(){
          hideBtn( btnBA, btnBB );
          b_video.destroy();
          hideContainer( window.containerB );
          showContainer( window.containerBB );
          bb_video.playVideo(); 
          clickedBA = true;
          clickedBB = true;  
      }

</script>





<script>
  function isWebview() {
    var useragent = navigator.userAgent;
    var rules = ['WebView','(iPhone|iPod|iPad)(?!.*Safari\/)','Android.*(wv|\.0\.0\.0)'];
    var regex = new RegExp(`(${rules.join('|')})`, 'ig');
    return Boolean(useragent.match(regex));
}

var iOS = !!navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform);

if(isWebview()) {

    $("#myModal").modal("show");

    if(iOS) {
       window.location = "googlechrome://"+location.host+location.pathname;

    } else if(/Micro/.test(navigator.userAgent)) {
     window.location = "intent://"+window.location.href.split("//")[1]+"#Intent;scheme=https;action=android.intent.action.VIEW;end;";
    }
    else {
      window.location = "intent://"+window.location.href.split("//")[1]+"#Intent;scheme=https;action=android.intent.action.VIEW;end;";
    }				
}


</script>

</body>
</html>
